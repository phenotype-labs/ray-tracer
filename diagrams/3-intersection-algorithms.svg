<svg id="my-svg" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart" style="max-width: 525.512px; background-color: white;" viewBox="0 0 525.51171875 4784.078125" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker id="my-svg_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><g class="root"><g class="clusters"/><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g class="root" transform="translate(0, 0)"><g class="clusters"><g class="cluster" id="TriIntersect" data-look="classic"><rect style="" x="8" y="8" width="509.51171875" height="2970.9375"/><g class="cluster-label" transform="translate(162.755859375, 8)"><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>INTERSECT_TRIANGLE (Möller-Trumbore)</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M239.016,195.5L239.016,201.75C239.016,208,239.016,220.5,239.016,232.333C239.016,244.167,239.016,255.333,239.016,260.917L239.016,266.5" id="L_TriInput_TriEdges_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_TriInput_TriEdges_0" data-points="W3sieCI6MjM5LjAxNTYyNSwieSI6MTk1LjV9LHsieCI6MjM5LjAxNTYyNSwieSI6MjMzfSx7IngiOjIzOS4wMTU2MjUsInkiOjI3MC41fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M239.016,348.5L239.016,354.75C239.016,361,239.016,373.5,239.016,385.333C239.016,397.167,239.016,408.333,239.016,413.917L239.016,419.5" id="L_TriEdges_TriBary_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_TriEdges_TriBary_0" data-points="W3sieCI6MjM5LjAxNTYyNSwieSI6MzQ4LjV9LHsieCI6MjM5LjAxNTYyNSwieSI6Mzg2fSx7IngiOjIzOS4wMTU2MjUsInkiOjQyMy41fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M239.016,693.5L239.016,699.75C239.016,706,239.016,718.5,239.016,730.333C239.016,742.167,239.016,753.333,239.016,758.917L239.016,764.5" id="L_TriBary_TriBary2_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_TriBary_TriBary2_0" data-points="W3sieCI6MjM5LjAxNTYyNSwieSI6NjkzLjV9LHsieCI6MjM5LjAxNTYyNSwieSI6NzMxfSx7IngiOjIzOS4wMTU2MjUsInkiOjc2OC41fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M239.016,990.5L239.016,996.75C239.016,1003,239.016,1015.5,239.016,1027.333C239.016,1039.167,239.016,1050.333,239.016,1055.917L239.016,1061.5" id="L_TriBary2_TriUV_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_TriBary2_TriUV_0" data-points="W3sieCI6MjM5LjAxNTYyNSwieSI6OTkwLjV9LHsieCI6MjM5LjAxNTYyNSwieSI6MTAyOH0seyJ4IjoyMzkuMDE1NjI1LCJ5IjoxMDY1LjV9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M239.016,1143.5L239.016,1149.75C239.016,1156,239.016,1168.5,239.016,1180.333C239.016,1192.167,239.016,1203.333,239.016,1208.917L239.016,1214.5" id="L_TriUV_TriTex_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_TriUV_TriTex_0" data-points="W3sieCI6MjM5LjAxNTYyNSwieSI6MTE0My41fSx7IngiOjIzOS4wMTU2MjUsInkiOjExODF9LHsieCI6MjM5LjAxNTYyNSwieSI6MTIxOC41fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M239.016,1416.5L239.016,1422.75C239.016,1429,239.016,1441.5,239.016,1453.333C239.016,1465.167,239.016,1476.333,239.016,1481.917L239.016,1487.5" id="L_TriTex_TriAlpha_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_TriTex_TriAlpha_0" data-points="W3sieCI6MjM5LjAxNTYyNSwieSI6MTQxNi41fSx7IngiOjIzOS4wMTU2MjUsInkiOjE0NTR9LHsieCI6MjM5LjAxNTYyNSwieSI6MTQ5MS41fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M198.037,1682.147L189.78,1697.226C181.522,1712.306,165.007,1742.466,156.75,1765.129C148.492,1787.792,148.492,1802.958,148.492,1810.542L148.492,1818.125" id="L_TriAlpha_TriAlphaTest_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_TriAlpha_TriAlphaTest_0" data-points="W3sieCI6MTk4LjAzNzIzMTk0MTA5Mzg0LCJ5IjoxNjgyLjE0NjYwNjk0MTA5Mzh9LHsieCI6MTQ4LjQ5MjE4NzUsInkiOjE3NzIuNjI1fSx7IngiOjE0OC40OTIxODc1LCJ5IjoxODIyLjEyNX1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M136.089,1990.035L134.444,2000.352C132.798,2010.669,129.506,2031.303,127.861,2073.204C126.215,2115.104,126.215,2178.271,126.215,2209.854L126.215,2241.438" id="L_TriAlphaTest_TriMiss_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_TriAlphaTest_TriMiss_0" data-points="W3sieCI6MTM2LjA4OTMxNDY1NTk1MjI1LCJ5IjoxOTkwLjAzNDYyNzE1NTk1MjJ9LHsieCI6MTI2LjIxNDg0Mzc1LCJ5IjoyMDUxLjkzNzV9LHsieCI6MTI2LjIxNDg0Mzc1LCJ5IjoyMjQ1LjQzNzV9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M188.775,1962.155L200.861,1977.118C212.948,1992.082,237.12,2022.01,252.34,2044.607C267.56,2067.204,273.828,2082.471,276.962,2090.104L280.095,2097.737" id="L_TriAlphaTest_TriNormal_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_TriAlphaTest_TriNormal_0" data-points="W3sieCI6MTg4Ljc3NTA2NDA5MTc3NzcsInkiOjE5NjIuMTU0NjIzNDA4MjIyM30seyJ4IjoyNjEuMjkyOTY4NzUsInkiOjIwNTEuOTM3NX0seyJ4IjoyODEuNjE0NTU2NzYwMjA0MSwieSI6MjEwMS40Mzc1fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M299.449,1662.692L319.443,1681.014C339.437,1699.336,379.426,1735.981,399.42,1777.579C419.414,1819.177,419.414,1865.729,419.414,1912.281C419.414,1958.833,419.414,2005.385,417.08,2036.274C414.747,2067.163,410.079,2082.388,407.745,2090.001L405.411,2097.613" id="L_TriAlpha_TriNormal_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_TriAlpha_TriNormal_0" data-points="W3sieCI6Mjk5LjQ0ODc1NTA0MjI1ODk0LCJ5IjoxNjYyLjY5MTg2OTk1Nzc0MTF9LHsieCI6NDE5LjQxNDA2MjUsInkiOjE3NzIuNjI1fSx7IngiOjQxOS40MTQwNjI1LCJ5IjoxOTEyLjI4MTI1fSx7IngiOjQxOS40MTQwNjI1LCJ5IjoyMDUxLjkzNzV9LHsieCI6NDA0LjIzOTA3ODQ0Mzg3NzUzLCJ5IjoyMTAxLjQzNzV9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M351.816,2443.438L351.816,2449.688C351.816,2455.938,351.816,2468.438,351.816,2480.271C351.816,2492.104,351.816,2503.271,351.816,2508.854L351.816,2514.438" id="L_TriNormal_TriEmissive_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_TriNormal_TriEmissive_0" data-points="W3sieCI6MzUxLjgxNjQwNjI1LCJ5IjoyNDQzLjQzNzV9LHsieCI6MzUxLjgxNjQwNjI1LCJ5IjoyNDgwLjkzNzV9LHsieCI6MzUxLjgxNjQwNjI1LCJ5IjoyNTE4LjQzNzV9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M351.816,2716.438L351.816,2722.688C351.816,2728.938,351.816,2741.438,351.816,2753.271C351.816,2765.104,351.816,2776.271,351.816,2781.854L351.816,2787.438" id="L_TriEmissive_TriHit_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_TriEmissive_TriHit_0" data-points="W3sieCI6MzUxLjgxNjQwNjI1LCJ5IjoyNzE2LjQzNzV9LHsieCI6MzUxLjgxNjQwNjI1LCJ5IjoyNzUzLjkzNzV9LHsieCI6MzUxLjgxNjQwNjI1LCJ5IjoyNzkxLjQzNzV9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" data-id="L_TriInput_TriEdges_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_TriEdges_TriBary_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_TriBary_TriBary2_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_TriBary2_TriUV_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_TriUV_TriTex_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_TriTex_TriAlpha_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(148.4921875, 1772.625)"><g class="label" data-id="L_TriAlpha_TriAlphaTest_0" transform="translate(-12.6953125, -12)"><foreignObject width="25.390625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>YES</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(126.21484375, 2051.9375)"><g class="label" data-id="L_TriAlphaTest_TriMiss_0" transform="translate(-12.6953125, -12)"><foreignObject width="25.390625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>YES</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(241.84501, 2027.85939)"><g class="label" data-id="L_TriAlphaTest_TriNormal_0" transform="translate(-10.5, -12)"><foreignObject width="21" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>NO</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(419.4140625, 1912.28125)"><g class="label" data-id="L_TriAlpha_TriNormal_0" transform="translate(-10.5, -12)"><foreignObject width="21" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>NO</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_TriNormal_TriEmissive_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_TriEmissive_TriHit_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-TriInput-14" transform="translate(239.015625, 120.5)"><rect class="basic label-container" style="" x="-86.9609375" y="-75" width="173.921875" height="150"/><g class="label" style="" transform="translate(-56.9609375, -60)"><rect/><foreignObject width="113.921875" height="120"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Input:<br />ray, triangle<br />(v0, v1, v2),<br />(uv0, uv1, uv2),<br />material</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-TriEdges-15" transform="translate(239.015625, 309.5)"><rect class="basic label-container" style="" x="-84.3984375" y="-39" width="168.796875" height="78"/><g class="label" style="" transform="translate(-54.3984375, -24)"><rect/><foreignObject width="108.796875" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>edge1 = v1 - v0<br />edge2 = v2 - v0</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-TriBary-17" transform="translate(239.015625, 558.5)"><rect class="basic label-container" style="" x="-120.828125" y="-135" width="241.65625" height="270"/><g class="label" style="" transform="translate(-90.828125, -120)"><rect/><foreignObject width="181.65625" height="240"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>h = cross(ray.dir, edge2)<br />a = dot(edge1, h)<br /><br />IF |a| &lt; ε: MISS (parallel)<br /><br />f = 1.0 / a<br />s = ray.origin - v0<br />u = f * dot(s, h)<br /><br />IF u &lt; 0 OR u &gt; 1: MISS</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-TriBary2-19" transform="translate(239.015625, 879.5)"><rect class="basic label-container" style="" x="-117.4765625" y="-111" width="234.953125" height="222"/><g class="label" style="" transform="translate(-87.4765625, -96)"><rect/><foreignObject width="174.953125" height="192"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>q = cross(s, edge1)<br />v = f * dot(ray.dir, q)<br /><br />IF v &lt; 0 OR u+v &gt; 1: MISS<br /><br />t = f * dot(edge2, q)<br /><br />IF t &lt; ε: MISS</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-TriUV-21" transform="translate(239.015625, 1104.5)"><rect class="basic label-container" style="" x="-120.0546875" y="-39" width="240.109375" height="78"/><g class="label" style="" transform="translate(-90.0546875, -24)"><rect/><foreignObject width="180.109375" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>w = 1.0 - u - v<br />uv = uv0<em>w + uv1</em>u + uv2*v</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-TriTex-23" transform="translate(239.015625, 1317.5)"><rect class="basic label-container" style="" x="-116.4453125" y="-99" width="232.890625" height="198"/><g class="label" style="" transform="translate(-86.4453125, -84)"><rect/><foreignObject width="172.890625" height="168"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>base_color =<br />  textureSampleLevel(<br />    texture_array,<br />    sampler,<br />    uv,<br />    material.texture_index,<br />    lod=0.0)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-TriAlpha-25" transform="translate(239.015625, 1607.3125)"><polygon points="115.8125,0 231.625,-115.8125 115.8125,-231.625 0,-115.8125" class="label-container" transform="translate(-115.3125, 115.8125)"/><g class="label" style="" transform="translate(-76.8125, -24)"><rect/><foreignObject width="153.625" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>material.alpha_mode<br />== MASK?</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-TriAlphaTest-27" transform="translate(148.4921875, 1912.28125)"><polygon points="90.15625,0 180.3125,-90.15625 90.15625,-180.3125 0,-90.15625" class="label-container" transform="translate(-89.65625, 90.15625)"/><g class="label" style="" transform="translate(-51.15625, -24)"><rect/><foreignObject width="102.3125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>base_color.a &lt;<br />alpha_cutoff?</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-TriMiss-29" transform="translate(126.21484375, 2272.4375)"><rect class="basic label-container" style="fill:#ffcccc !important" x="-45.6015625" y="-27" width="91.203125" height="54"/><g class="label" style="" transform="translate(-15.6015625, -12)"><rect/><foreignObject width="31.203125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>MISS</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-TriNormal-31" transform="translate(351.81640625, 2272.4375)"><rect class="basic label-container" style="" x="-130" y="-171" width="260" height="342"/><g class="label" style="" transform="translate(-100, -156)"><rect/><foreignObject width="200" height="312"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Normal mapping:<br />IF normal_texture_index &gt;= 0:<br />  tangent_normal =<br />    textureSampleLevel(...)*2-1<br />  normal = TBN * tangent_normal<br />ELSE:<br />  normal = normalize(<br />           cross(edge1, edge2))</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-TriEmissive-36" transform="translate(351.81640625, 2617.4375)"><rect class="basic label-container" style="" x="-130.6953125" y="-99" width="261.390625" height="198"/><g class="label" style="" transform="translate(-100.6953125, -84)"><rect/><foreignObject width="201.390625" height="168"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Emissive:<br />IF emissive_texture_index &gt;= 0:<br />  emissive = material.emissive *<br />    textureSampleLevel(...).rgb</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-TriHit-38" transform="translate(351.81640625, 2866.4375)"><rect class="basic label-container" style="fill:#ccffcc !important" x="-107.515625" y="-75" width="215.03125" height="150"/><g class="label" style="" transform="translate(-77.515625, -60)"><rect/><foreignObject width="155.03125" height="120"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>HIT:<br />distance, position,<br />normal, base_color,<br />emissive, reflectivity,<br />material_id</p></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(16.634765625, 3020.9375)"><g class="clusters"><g class="cluster" id="BoxIntersect" data-look="classic"><rect style="" x="8" y="8" width="476.2421875" height="1747.140625"/><g class="cluster-label" transform="translate(146.12109375, 8)"><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>INTERSECT_BOX (AABB Slab Method)</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M231.215,147.5L231.215,153.75C231.215,160,231.215,172.5,231.215,184.333C231.215,196.167,231.215,207.333,231.215,212.917L231.215,218.5" id="L_BoxInput_BoxInterp_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_BoxInput_BoxInterp_0" data-points="W3sieCI6MjMxLjIxNDg0Mzc1LCJ5IjoxNDcuNX0seyJ4IjoyMzEuMjE0ODQzNzUsInkiOjE4NX0seyJ4IjoyMzEuMjE0ODQzNzUsInkiOjIyMi41fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M231.215,372.5L231.215,378.75C231.215,385,231.215,397.5,231.215,409.333C231.215,421.167,231.215,432.333,231.215,437.917L231.215,443.5" id="L_BoxInterp_BoxBounds_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_BoxInterp_BoxBounds_0" data-points="W3sieCI6MjMxLjIxNDg0Mzc1LCJ5IjozNzIuNX0seyJ4IjoyMzEuMjE0ODQzNzUsInkiOjQxMH0seyJ4IjoyMzEuMjE0ODQzNzUsInkiOjQ0Ny41fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M231.215,573.5L231.215,579.75C231.215,586,231.215,598.5,231.215,610.333C231.215,622.167,231.215,633.333,231.215,638.917L231.215,644.5" id="L_BoxBounds_BoxSlab_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_BoxBounds_BoxSlab_0" data-points="W3sieCI6MjMxLjIxNDg0Mzc1LCJ5Ijo1NzMuNX0seyJ4IjoyMzEuMjE0ODQzNzUsInkiOjYxMX0seyJ4IjoyMzEuMjE0ODQzNzUsInkiOjY0OC41fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M231.215,990.5L231.215,996.75C231.215,1003,231.215,1015.5,231.215,1027.333C231.215,1039.167,231.215,1050.333,231.215,1055.917L231.215,1061.5" id="L_BoxSlab_BoxCheck_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_BoxSlab_BoxCheck_0" data-points="W3sieCI6MjMxLjIxNDg0Mzc1LCJ5Ijo5OTAuNX0seyJ4IjoyMzEuMjE0ODQzNzUsInkiOjEwMjh9LHsieCI6MjMxLjIxNDg0Mzc1LCJ5IjoxMDY1LjV9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M193.79,1206.216L183.292,1220.703C172.794,1235.191,151.797,1264.166,141.299,1296.237C130.801,1328.307,130.801,1363.474,130.801,1381.057L130.801,1398.641" id="L_BoxCheck_BoxMiss_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_BoxCheck_BoxMiss_0" data-points="W3sieCI6MTkzLjc5MDE3MTQyMDM5ODgyLCJ5IjoxMjA2LjIxNTk1MjY3MDM5ODh9LHsieCI6MTMwLjgwMDc4MTI1LCJ5IjoxMjkzLjE0MDYyNX0seyJ4IjoxMzAuODAwNzgxMjUsInkiOjE0MDIuNjQwNjI1fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M268.64,1206.216L279.138,1220.703C289.636,1235.191,310.632,1264.166,321.131,1286.237C331.629,1308.307,331.629,1323.474,331.629,1331.057L331.629,1338.641" id="L_BoxCheck_BoxNormal_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_BoxCheck_BoxNormal_0" data-points="W3sieCI6MjY4LjYzOTUxNjA3OTYwMTE1LCJ5IjoxMjA2LjIxNTk1MjY3MDM5ODh9LHsieCI6MzMxLjYyODkwNjI1LCJ5IjoxMjkzLjE0MDYyNX0seyJ4IjozMzEuNjI4OTA2MjUsInkiOjEzNDIuNjQwNjI1fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M331.629,1516.641L331.629,1522.891C331.629,1529.141,331.629,1541.641,331.629,1553.474C331.629,1565.307,331.629,1576.474,331.629,1582.057L331.629,1587.641" id="L_BoxNormal_BoxHit_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_BoxNormal_BoxHit_0" data-points="W3sieCI6MzMxLjYyODkwNjI1LCJ5IjoxNTE2LjY0MDYyNX0seyJ4IjozMzEuNjI4OTA2MjUsInkiOjE1NTQuMTQwNjI1fSx7IngiOjMzMS42Mjg5MDYyNSwieSI6MTU5MS42NDA2MjV9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" data-id="L_BoxInput_BoxInterp_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_BoxInterp_BoxBounds_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_BoxBounds_BoxSlab_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_BoxSlab_BoxCheck_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(130.80078125, 1293.140625)"><g class="label" data-id="L_BoxCheck_BoxMiss_0" transform="translate(-12.6953125, -12)"><foreignObject width="25.390625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>YES</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(331.62890625, 1293.140625)"><g class="label" data-id="L_BoxCheck_BoxNormal_0" transform="translate(-10.5, -12)"><foreignObject width="21" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>NO</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_BoxNormal_BoxHit_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-BoxInput-0" transform="translate(231.21484375, 96.5)"><rect class="basic label-container" style="" x="-99.265625" y="-51" width="198.53125" height="102"/><g class="label" style="" transform="translate(-69.265625, -36)"><rect/><foreignObject width="138.53125" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Input:<br />ray, box.center,<br />box.half_size, time</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-BoxInterp-1" transform="translate(231.21484375, 297.5)"><rect class="basic label-container" style="" x="-128.5625" y="-75" width="257.125" height="150"/><g class="label" style="" transform="translate(-98.5625, -60)"><rect/><foreignObject width="197.125" height="120"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Interpolate position:<br />t_lerp = (sin(time*2)+1)*0.5<br />center = mix(center0,<br />            center1,<br />            t_lerp)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-BoxBounds-3" transform="translate(231.21484375, 510.5)"><rect class="basic label-container" style="" x="-130" y="-63" width="260" height="126"/><g class="label" style="" transform="translate(-100, -48)"><rect/><foreignObject width="200" height="96"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>box_min = center - half_size<br />box_max = center + half_size</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-BoxSlab-5" transform="translate(231.21484375, 819.5)"><rect class="basic label-container" style="" x="-130" y="-171" width="260" height="342"/><g class="label" style="" transform="translate(-100, -156)"><rect/><foreignObject width="200" height="312"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Slab test:<br />inv_dir = 1.0 / ray.direction<br />t_min = (box_min - ray.origin) * inv_dir<br />t_max = (box_max - ray.origin) * inv_dir<br /><br />t1 = min(t_min, t_max)<br />t2 = max(t_min, t_max)<br /><br />t_near = max(t1.x, t1.y, t1.z)<br />t_far = min(t2.x, t2.y, t2.z)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-BoxCheck-7" transform="translate(231.21484375, 1154.5703125)"><polygon points="89.0703125,0 178.140625,-89.0703125 89.0703125,-178.140625 0,-89.0703125" class="label-container" transform="translate(-88.5703125, 89.0703125)"/><g class="label" style="" transform="translate(-50.0703125, -24)"><rect/><foreignObject width="100.140625" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>t_near &gt; t_far<br />OR t_far &lt; 0?</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-BoxMiss-9" transform="translate(130.80078125, 1429.640625)"><rect class="basic label-container" style="fill:#ffcccc !important" x="-45.6015625" y="-27" width="91.203125" height="54"/><g class="label" style="" transform="translate(-15.6015625, -12)"><rect/><foreignObject width="31.203125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>MISS</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-BoxNormal-11" transform="translate(331.62890625, 1429.640625)"><rect class="basic label-container" style="" x="-105.2265625" y="-87" width="210.453125" height="174"/><g class="label" style="" transform="translate(-75.2265625, -72)"><rect/><foreignObject width="150.453125" height="144"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Calculate normal:<br />p = hit_pos - center<br />d = abs(p) - half_size<br /><br />normal = axis with<br />         largest d component</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-BoxHit-13" transform="translate(331.62890625, 1654.640625)"><rect class="basic label-container" style="fill:#ccffcc !important" x="-96.71875" y="-63" width="193.4375" height="126"/><g class="label" style="" transform="translate(-66.71875, -48)"><rect/><foreignObject width="133.4375" height="96"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>HIT:<br />distance, position,<br />normal, color,<br />reflectivity</p></span></div></foreignObject></g></g></g></g></g></g></g></svg>